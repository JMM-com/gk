(function(e,t){var n=e.jQuery;n&&t(e,e.document,n)})(window,function(e,t,n,r){var i=function(e,t){function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n};var s=function(){function e(e){this.id=e;this.ele=n("#"+this.id);this.bindEvent()}var r=e.prototype;r._init=function(){};r.init=function(){};r.removeDefAttr=function(e,t){if(arguments.length==1){t=e;e=this.ele}if(typeof t==="string"){t=[t]}for(var n in t){if("${"+t[n]+"}"===this.ele.attr(t[n])){this.ele.removeAttr(t[n])}}};r.replaceAttr=function(e,t,n){if(this.ele.attr(e)==t){this.ele.attr(e,n)}};r.setAttr=function(e,t){for(var n=0;n<t.length;n++){var r=this.ele.attr(t[n]);if(r!="${"+t[n]+"}"){e[t[n]]=r}}};r.bindEvent=function(){var e=this;var r=t.getElementById(this.id);if(r==null){return}for(var i=0;i<r.attributes.length;i++){var s=r.attributes[i];if(s.name.indexOf("data-gk-")==0){var o=s.name.substring(8);var u="on"+o;n(this.ele).unbind(o);this.ele.bind(o,function(t){if(typeof e[u]=="function"){e[u](t)}})}}};r.className=function(){var e=/function (.{1,})\(/;var t=e.exec(this["constructor"].toString());var n=t&&t.length>1?t[1]:"";return n.split("(")[0]};r.gkm=function(){return u.gkm[this.id]};r.infoArray=function(e){var t="";var r=this;n.each(e,function(e,n){var i=a.template(r.id);for(var s in n){if(n.hasOwnProperty(s)){var o=n[s];var u=new RegExp("\\${"+s+"}","g");i=i.replace(u,o)}}t+=i});t=n.gk["toHTML"](t);return t};r.infoObject=function(e){var t="";var r=a.template(this.id);for(var i in e){if(e.hasOwnProperty(i)){var s=e[i];var o=new RegExp("\\${"+i+"}","g");r=r.replace(o,s)}}t+=r;t=n.gk["toHTML"](t);return t};r.template=function(e){if(e){a.eventStore["template"][this.id]=e}else{return a.eventStore["template"][this.id]}};return e}();var o=function(){var e={};fragDiv=t.createElement("div");e.safeDocumentFrag=t.createDocumentFragment();e.safeDocumentFrag.appendChild(fragDiv);e.createElement=function(i){if(!n.support.leadingWhitespace){t.createElement(i);e.safeDocumentFrag["createElement"](i)}};e.createDIVWrapper=function(t){var n;fragDiv.innerHTML="<div>"+t+"</div>";fragDiv.removeChild(n=fragDiv.firstChild);return n};e.cloneNode=function(t){var r;if(!n.support.leadingWhitespace){fragDiv.innerHTML=t.outerHTML;fragDiv.removeChild(r=fragDiv.firstChild)}else{r=t.cloneNode(true)}return r};e.toElement=function(n){var r=e.createDIVWrapper(n);return r.firstChild};e.innerHTML=function(t){var n="";var r=t;if(r!=null){if(t.innerHTML!==""){return t.innerHTML}while(r.nextSibling){r=r.nextSibling;if(r.nodeType===3){n+=r.nodeValue.trim();r.nodeValue=""}else if(r.nodeType===1){break}}}return n};e.createElement("template");return e}();var u=function(){var e={CLASS:"use",gkm:{}};e.replaceWith=function(t){if(typeof t==="undefined"){return}var r=a,i=o,s=t,u=i.cloneNode(r.customTags[t.nodeName.toUpperCase()]),f=n(u),l=f.attr(this.CLASS)||"WebComponent",c=f.html(),h,p,d;if(typeof s.id==="undefined"||s.id===""){p=s.id=r.getGenId()}else{p=s.id}h="$.gk.com('"+p+"' , new $.gk._gk.components['"+l+"']('"+p+"'));";r.eventStore["script"].push(h);d=i.innerHTML(s);this.gkm[p]=d;c=c.replace(r.gkm,d);n.each(s.attributes,function(e,t){var n=new RegExp("\\${"+t.nodeName+"}","gi");c=c.replace(n,t.nodeValue)});var v=i.toElement(c);i.replaceElement(s,v);return v};return e}();var a=function(){var e={};e.serial=0;e.customTags={};e.gkm="${content}";e.DATAKEY="_gk_";e.genIdPrefix="_gk_gen_";e.eventStore=[];e.eventStore.script=[];e.eventStore.template={};e.getGenId=function(){return this.genIdPrefix+this.serial++};e.template=function(t){return this.eventStore["template"][t]};e.isComponent=function(t){return this.customTags[t.toUpperCase()]};o.replaceElement=function(t,n){var r=t.parentNode;while(n!=null){var i=n.nextSibling;r.insertBefore(n,t);n=i}r.removeChild(t)};e.process=function(r){var i=n.type(r),s=e;if(i==="null"||i==="undefined"){return}var o=r.nodeName.toUpperCase();if(o==="TEMPLATE"){var a=n(r.parentNode).attr("id");s.eventStore["template"][a]=r.innerHTML;r.innerHTML=""}if(s.isComponent(o)){s.process(u.replaceWith(r))}else if(r.firstChild){s.process(r.firstChild)}else if(r.nextSibling){s.process(r.nextSibling)}else if(r.parentNode&&r.parentNode.parentNode){r=r.parentNode;while(r.nextSibling==null){if(r.parentNode){r=r.parentNode}else{return}}s.process(r.nextSibling)}};return e}();var f={components:{WebComponent:s},__extends:i,TagLibrary:a,TagUtils:o,CustomTag:u};var l=function(e){if(e.indexOf("#")==0){return n(e).data(a.DATAKEY)}return{html:function(t){var r=n(e);if(t){r.html(t);return r}else{var i=r.html(),s=n.gk["toHTML"](i);return s}},toHTML:function(){n(e).each(function(e,t){var r=n(t),i=r.html(),s=n.gk["toHTML"](i);r.html(s)})}}};l.version="0.4";l._gk=f;l.model={};l.toHTML=function(e){var t=o.createDIVWrapper(e),n,r;a.process(t);n=(a.eventStore["script"]||[]).join(" ");r=t.innerHTML+"<script>"+n+"</script>";a.eventStore["script"]=[];return r.replace(/(\s*\w+=['"]\$\{\w+\}['"])|(\$\{\w+\})/g,"")};l.com=function(e,t){if(t){n("#"+e).data(a.DATAKEY,t);var r=n.gk["model"][e];if(r){for(var i in r){if(r.hasOwnProperty(i)){t[i]=r[i]}}}t["_init"]();t["init"]()}else{return n("#"+e).data(a.DATAKEY)}};l.init=function(){n("[gk-app]").each(function(e,t){var r=n(t);var i=n.gk["toHTML"](r.html());r.html(i)});n("*[gk-obj]").each(function(e,t){var r=n(t),i=r.attr("id"),s=r.attr("gk-obj"),o=n.gk._gk.components[s];if(o){n.gk.com(i,o(i))}})};n.gk=l;n.fn.gk=function(e){if(arguments.length==0){return n(this).data(a.DATAKEY)}var t=Array.prototype.slice.call(arguments,1),r;this.each(function(i,s){var o=n(s).data(a.DATAKEY);if(o instanceof Object&&n.type(o[e])==="function"){var u=o[e].apply(o,t);if(i==0){r=u}}});return r};if(typeof define==="function"){define(function(){return n.gk._gk})}else{var c=n(t);c.triggerHandler("gkComponentsInit");c.ready(function(){n.gk.init()})}})